!function e(o,t,n){function r(a,i){if(!t[a]){if(!o[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=t[a]={exports:{}};o[a][0].call(s.exports,function(e){var t=o[a][1][e];return r(t?t:e)},s,s.exports,e,o,t,n)}return t[a].exports}for(var c="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e){var o,t,n,r;o=angular.module("mampfApp",["onsen.directives","ngTouch","ngMd5","ui.map","angularLocalStorage"]),t={config:e("./config/static.coffee"),constants:e("./config/constants.coffee"),_:window._},o.constant(t),r={device:e("./factories/device.coffee"),cordovaReady:e("./factories/cordova_ready.coffee"),contactChooser:e("./factories/contact_chooser.coffee"),geoLocation:e("./factories/geolocation.coffee"),sharedData:e("./factories/shared_data.coffee"),server:e("./factories/server.coffee")},o.factory(r),n={ContactListCtrl:e("./controllers/contacts/contact_list_ctrl.coffee"),ContactDetailsCtrl:e("./controllers/contacts/contact_details_ctrl.coffee"),LunchRequestCtrl:e("./controllers/lunch/lunch_request_ctrl.coffee"),LunchResponseCtrl:e("./controllers/lunch/lunch_response_ctrl.coffee"),ChooseLocationCtrl:e("./controllers/lunch/choose_location_ctrl.coffee"),ChooseContactCtrl:e("./controllers/lunch/choose_contact_ctrl.coffee"),ProfileCtrl:e("./controllers/profile/profile_ctrl.coffee"),AddLocationCtrl:e("./controllers/profile/add_location_ctrl.coffee"),ShowLocationsCtrl:e("./controllers/profile/show_locations_ctrl.coffee"),LocationDetailCtrl:e("./controllers/profile/location_detail_ctrl.coffee")},o.controller(n),window.onGoogleReady=function(){return console.log("google rdy"),angular.bootstrap(document.getElementsByTagName("body"),["mampfApp"])}},{"./config/constants.coffee":2,"./config/static.coffee":3,"./controllers/contacts/contact_details_ctrl.coffee":4,"./controllers/contacts/contact_list_ctrl.coffee":5,"./controllers/lunch/choose_contact_ctrl.coffee":6,"./controllers/lunch/choose_location_ctrl.coffee":7,"./controllers/lunch/lunch_request_ctrl.coffee":8,"./controllers/lunch/lunch_response_ctrl.coffee":9,"./controllers/profile/add_location_ctrl.coffee":10,"./controllers/profile/location_detail_ctrl.coffee":11,"./controllers/profile/profile_ctrl.coffee":12,"./controllers/profile/show_locations_ctrl.coffee":13,"./factories/contact_chooser.coffee":14,"./factories/cordova_ready.coffee":15,"./factories/device.coffee":16,"./factories/geolocation.coffee":17,"./factories/server.coffee":18,"./factories/shared_data.coffee":19}],2:[function(e,o){var t;t={USE_GPS_LOCATION:0,USE_PREDEFINED_LOCATION:1,LOCATION_NOT_SET:2},o.exports=t},{}],3:[function(e,o){var t;t={server:"http://141.83.68.32/mampf",dummyContacts:[{displayName:"dummy",selected:!1,telephone:"+4917629322211",telephoneHash:"f828ffdfcd8b508cd0a9d16771a55745"},{displayName:"dummy2",selected:!1,telephone:"+4917629322212",telephoneHash:"2180878ef6bb945692cd66a0c053faf0"}],dummyLocations:[{locationName:"Footown",selected:!1,latitude:-6,longitude:-7},{locationName:"Bartown",selected:!1,latitude:-5,longitude:-8}],dummyUser:{telephone:"01522905094913",telephoneHash:"d949dd7b976c60f70f6492ee673d6768"}},o.exports=t},{}],4:[function(e,o){var t;t=["$scope","config","storage","sharedData",function(){}],o.exports=t},{}],5:[function(e,o){var t;t=["$scope","contactChooser","sharedData","storage","config","md5",function(e,o,t,n,r,c){return n.bind(e,"contacts",{defaultValue:r.dummyContacts}),e.toggleContact=function(o){return o.selected=!o.selected,t.contacts=e.contacts},e.contactAdd=function(){return o.get().then(function(o){var n,r;return console.log("contact",o,o.phoneNumbers.value),o.phoneNumbers&&(n=o.phoneNumbers[1].value).trim()&&(n=n.replace(/^\+49\s*/,0),r=c.createHash(""+n)),o={displayName:o.displayName,telephone:n,telephoneHash:r,selected:!1},console.log("contact after",o),e.contacts.push(o),t.contacts.length?t.contacts.push(o):void 0},function(e){return console.log("lol fehler",e)})}}],o.exports=t},{}],6:[function(e,o){var t;t=["$scope","config","storage","sharedData",function(e,o,t,n){var r,c,a,i;if(n.contacts.length)e.contactsForChoose=n.contacts;else for(e.contacts=t.get("contacts"),e.contactsForChoose=angular.copy(e.contacts),i=e.contactsForChoose,c=0,a=i.length;a>c;c++)r=i[c],r.selected=!1;return e.toggleContact=function(o){return o.selected=!o.selected,n.contacts=e.contactsForChoose}}],o.exports=t},{}],7:[function(e,o){var t;t=["$scope","config","storage","sharedData",function(e,o,t,n){var r,c,a,i;if(e.positionLocation=n.positionLocation||!1,n.locations.length)e.locationsForChoose=n.locations;else for(e.locations=t.get("locations"),e.locationsForChoose=angular.copy(e.locations),i=e.locationsForChoose,c=0,a=i.length;a>c;c++)r=i[c],r.selected=!1;return e.toggleLocation=function(o){var t,r,c,a;for(e.positionLocation=!1,a=e.locationsForChoose,r=0,c=a.length;c>r;r++)t=a[r],t.selected=!1;return o.selected=!o.selected,n.locations=e.locationsForChoose},e.setLocationPosition=function(){var o,t,r,c;for(c=e.locationsForChoose,t=0,r=c.length;r>t;t++)o=c[t],o.selected=!1;return e.positionLocation=!e.positionLocation,n.positionLocation=e.positionLocation}}],o.exports=t},{}],8:[function(e,o){var t;t=["$scope","sharedData","storage","config","constants","geoLocation","server","$q",function(e,o,t,n,r,c,a,i){var l,s;return t.bind(e,"user"),e.getCurrentDateTime=function(){var o;return e.startTime=(new Date).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}),o=(new Date).getTime()+72e5,e.endTime=new Date(o).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})},e.getCurrentDateTime(),e.getCount=function(){return o.contacts.filter(function(e){return e.selected}).length},e.getSelectedLocationName=function(){var e,o,t;switch(t=s(),o=t[0],e=t[1],o){case r.USE_PREDEFINED_LOCATION:return e.length?e[0].locationName:null;case r.USE_GPS_LOCATION:return"Aktuelle Position ermitteln";case r.LOCATION_NOT_SET:return null;default:return null}},e.doRequest=function(){var t,n,r,c,i,s;return s=new Date,t=""+s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),c=new Date(Date.parse(""+t+", "+e.startTime)).toISOString(),n=new Date(Date.parse(""+t+", "+e.endTime)).toISOString(),r=o.contacts.filter(function(e){return e.selected}).map(function(e){return e.telephoneHash}),i=e.user.telephoneHash,l().then(function(e){var o;return o={identity:i,invitees:r,currentPosition:e,timeSlots:[{startTime:c,endTime:n}]},a.create({data:o}).then(function(e){return console.log("we have a response",e)})},function(){return console.log("oops error while retrieving coordinates")})},s=function(){var e;return e=o.locations.filter(function(e){return e.selected}),e.length?[r.USE_PREDEFINED_LOCATION,e]:o.positionLocation?[r.USE_GPS_LOCATION,null]:[r.LOCATION_NOT_SET,null]},l=function(){var e,o,t,n;switch(e=i.defer(),n=s(),t=n[0],o=n[1],t){case r.USE_PREDEFINED_LOCATION:o.length?e.resolve({longitude:o[0].longitude,latitude:o[0].latitude}):e.reject();break;case r.USE_GPS_LOCATION:c.getPosition().then(function(o){return e.resolve({latitude:o.coords.latitude,longitude:o.coords.longitude})},function(){return e.reject()});break;case r.LOCATION_NOT_SET:e.reject();break;default:e.reject()}return e.promise}}],o.exports=t},{}],9:[function(){},{}],10:[function(e,o){var t;t=["$scope","config","storage","sharedData","geoLocation",function(e,o,t,n,r){return t.bind(e,"locations",{defaultValue:o.dummyLocations}),e.locationModel="Ort "+(e.locations.length+1),e.mapOptions={center:new google.maps.LatLng(53.8353,10.6349),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},e.addNewLocation=function(){var o,t,r;return o=e.marker.getPosition().lat(),t=e.marker.getPosition().lng(),r={locationName:e.locationModel,selected:!1,latitude:o,longitude:t},e.locations.push(r),n.locations.length?n.locations.push(r):void 0},e.mapClick=function(o,t){return e.setMarkerPosition(t[0].latLng.lat(),t[0].latLng.lng())},e.setMarkerPosition=function(o,t){return e.marker.setPosition(new google.maps.LatLng(o,t))},e.refreshPosition=function(){return r.getPosition().then(function(o){var t;return e.position=o,t={lat:o.coords.latitude,lng:o.coords.longitude},e.mampfMap&&e.mampfMap.setCenter(t),e.marker?e.marker.setPosition(t):e.marker=new google.maps.Marker({position:t,map:e.mampfMap})},function(e){return console.log("lol noch ein geo fehler",e)})},e.refreshPosition()}],o.exports=t},{}],11:[function(e,o){var t;t=["$scope","config","sharedData","$timeout","storage",function(e,o,t,n,r){return r.bind(e,"locations",{defaultValue:o.dummyLocations}),e.location=t.location,e.modalMapOptions={center:new google.maps.LatLng(e.location.latitude,e.location.longitude),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},e.mapClick=function(o,t){var n,r,c;return c=[t[0].latLng.lat(),t[0].latLng.lng()],n=c[0],r=c[1],e.marker.setPosition(new google.maps.LatLng(n,r)),e.location.longitude=r,e.location.latitude=n},e.refreshPosition=function(){var o;if(e.modalMampfMap)return o={lat:e.location.latitude,lng:e.location.longitude},e.modalMampfMap.setCenter(o),e.marker?e.marker.setPosition(o):e.marker=new google.maps.Marker({position:o,map:e.modalMampfMap})},n(function(){return e.refreshPosition()},500)}],o.exports=t},{}],12:[function(e,o){var t;t=["$scope","md5","config","_","storage","sharedData",function(e,o,t,n,r,c){return r.bind(e,"user",{defaultValue:t.dummyUser}),c.user=e.user,e.$watch("user.telephone",n.debounce(function(t){return t?e.$apply(function(){return e.user.telephone=t.replace(" ",""),e.user.telephoneHash=o.createHash(""+e.user.telephone),c.user=e.user}):void 0},500))}],o.exports=t},{}],13:[function(e,o){var t;t=["$scope","config","storage","sharedData",function(e,o,t,n){return t.bind(e,"locations",{defaultValue:o.dummyLocations}),e.pushPage=function(e){return n.location=e,ons.navigator.pushPage("partials/profile/locationDetail.html",{animation:"fade"})},e.deleteAllSelected=function(){var o,t,n,r,c;for(r=e.locations.filter(function(e){return e.selected}),c=[],t=0,n=r.length;n>t;t++)o=r[t],c.push(e.deleteLocation(o));return c},e.deleteLocation=function(o){return e.locations.splice(e.locations.indexof(o),1)}}],o.exports=t},{}],14:[function(e,o){var t;t=["$window","$timeout","$q",function(e,o,t){var n;return n=function(){var e;return e=t.defer(),navigator.contacts.pickContact(function(o){return e.resolve(o)},function(o){return e.reject(o)}),e.promise},{get:n}}],o.exports=t},{}],15:[function(e,o){var t;t=["$q","$rootScope","$document",function(e,o,t){var n;return n=e.defer(),t.bind("deviceready",function(){return o.$apply(n.resolve)}),{ready:function(){return n.promise}}}],o.exports=t},{}],16:[function(e,o){var t;t=function(){var e,o,t,n,r;for(o={},r=["cordova","model","name","platform","uuid","version"],t=0,n=r.length;n>t;t++)e=r[t],o[e]="undefined"!=typeof device&&null!==device?device[e]:null;return o},o.exports=t},{}],17:[function(e,o){var t;t=["$q",function(e){var o;return o=function(){var o;return o=e.defer(),navigator.geolocation.getCurrentPosition(function(e){return o.resolve(e)},function(e){return o.reject(e)},{maximumAge:5e3,timeout:5e3,enableHighAccuracy:!0}),o.promise},{getPosition:o}}],o.exports=t},{}],18:[function(e,o){var t;t=["$http","config",function(e,o){var t;return t=function(t){return e({method:t.method,url:""+o.server,data:t.data})},{create:function(e){return t(angular.extend(e,{method:"POST"}))},update:function(e){return t(angular.extend(e,{method:"PUT"}))},"delete":function(e){return t(angular.extend(e,{method:"DELETE"}))},get:function(e){return t(angular.extend(e,{method:"GET"}))}}}],o.exports=t},{}],19:[function(e,o){var t;t=function(){return{contacts:[],locations:[]}},o.exports=t},{}]},{},[1]);